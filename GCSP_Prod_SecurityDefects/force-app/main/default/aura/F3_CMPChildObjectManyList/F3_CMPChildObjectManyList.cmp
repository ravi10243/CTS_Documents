<aura:component >
    <aura:attribute name = "childRecordId" type = "String" />
    <aura:attribute name = "recordHeader" type = "String" />
    <aura:attribute name = "selectedChildRecordId" type = "String" default=""/>
    <aura:attribute name="elementWrapper" type="Object"/> 
    <aura:attribute name="renderMode" type="String" default="COMMUNITY"/>
    <aura:attribute name="currentStepType" type="String"/>
    <aura:attribute name="childObjectAPIName" type="String"/>
    <aura:attribute name="relationshipFieldAPIName" type="String"/>
    <aura:attribute name="parentRecordId" type="String"/>
    <aura:attribute name="mdChildObjectOneConfig" type="Object"/>
    <aura:attribute name="listFieldConfig" type="List" />
    <aura:attribute name="recordIdToDelete" type="String" />
    
    <aura:registerEvent name="saveEditEvent" type="c:F3_CMPChildObjectManySave"/> 
    <div class="slds-box slds-box_xx-small">
        <lightning:accordionSection name="{!v.recordHeader}" label="{!v.recordHeader}" class = "accordionColor">
            
            <div class="slds-p-around_small">
                <!-- Show Record Edit Form when selected -->
                <aura:if isTrue="true">
                    <lightning:recordEditForm 
                                              onsubmit="{!c.onFormSubmit}"
                                              onsuccess="{!c.onFormSubmitSuccess}"
                                              onload="{!c.onFormLoad}"
                                              onerror="{!c.onFormSubmitError}"
                                              recordId="{!v.childRecordId}"
                                              aura:id="recordEdit"
                                              objectApiName="{!v.childObjectAPIName}">
                        <lightning:messages />
                        <aura:iteration items="{!v.listFieldConfig}" var="elementWrapper">
                            <aura:if isTrue="{!elementWrapper.IsHidden}">
                                <aura:if isTrue="{!elementWrapper.IsHidden==true}">
                                    <c:F3_CMPChildObjectFieldHidden 
                                                                    aura:id="childobjectfieldhidden" 
                                                                    elementWrapper="{!elementWrapper}"/>
                                </aura:if>
                                <aura:if isTrue="{!elementWrapper.IsHidden==false}">
                                    <c:F3_CMPChildObjectField 
                                                              aura:id="childobjectfield" 
                                                              elementWrapper="{!elementWrapper}"
                                                              currentStepType="{!v.currentStepType}"
                                                              renderMode="{!v.renderMode}"/>
                                </aura:if>
                                <aura:set attribute="else">
                                    <c:F3_CMPChildObjectField 
                                                              aura:id="childobjectfield" 
                                                              elementWrapper="{!elementWrapper}"
                                                              currentStepType="{!v.currentStepType}"
                                                              renderMode="{!v.renderMode}"/>
                                </aura:set>  
                            </aura:if>    
                        </aura:iteration>
                        <aura:if isTrue="{!v.recordId}">
                            <lightning:outputField aura:id="relationshipFieldAPIName" 
                                                   fieldName="{!v.relationshipFieldAPIName}"  class="slds-hide slds-lookup" variant="label-hidden" />    
                        </aura:if>    
                        <aura:if isTrue="{!!v.recordId}">
                            <lightning:inputField aura:id="relationshipFieldAPIName" 
                                                  fieldName="{!v.relationshipFieldAPIName}" value="{!v.parentRecordId}"  class="slds-hide slds-lookup" variant="label-hidden"  />  
                        </aura:if>
                    </lightning:recordEditForm>
                    <lightning:notificationsLibrary aura:id="notifLib"/>
                    <div class="slds-align_absolute-center slds-p-top_small">
                        <lightning:button variant="brand" value ="{!v.childRecordId}" onclick="{!c.Save}" label="Save" title="Save" />
                    </div>
                </aura:if>    
            </div>
        </lightning:accordionSection>
    </div>
    <!--
    <div class="slds-box slds-box_small">
        <p>
            {!v.recordHeader}
            <div class = "slds-float_left slds-m-horizontal_x-large">
                <lightning:buttonIcon variant="destructive" iconName="utility:delete"  size="small" value="{!v.childRecordId}" title="Delete Record" onclick="{!c.OnDelete}"/>
                <lightning:buttonIcon variant="success" iconName="utility:edit"  size="small" name="{!v.childRecordId}"  value="{!v.childRecordId}" title="Edit Record" onclick="{!c.OnEdit}"/>
                
            </div>
        </p>
    </div>
    -->    
    
</aura:component>